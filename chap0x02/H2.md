# 第二章实验报告 

 ## 软件环境

 本地环境本地环境（Ubuntu）  
 云环境（CentOS）  
 asciinema  
 ## 软件包管理

 ### 任务：

 在目标发行版上安装 tmux 和 tshark ；  
 查看这 2 个软件被安装到哪些路径；  
 卸载 tshark ；  
 验证 tshark 卸载结果  

 #### ubuntu下安装tmux

 ```sudo apt install tmux```  
 查看路径：  
 ```whereis tmux```  
 tmux: /usr/bin/tmux /usr/share/man/man1/tmux.1.gz  
 ```sudo apt-cache show tmux```  

 [![asciicast](https://asciinema.org/a/rcAFvrD6aW52rwol0DqhAzRmd.svg)](https://asciinema.org/a/rcAFvrD6aW52rwol0DqhAzRmd)

 #### ubuntu安装查看卸载tshark

 ```sudo apt install tshark```  
 ```sudo apt-cache show tshark```  
 ```sudo apt-get purge tshark```   

 [![asciicast](https://asciinema.org/a/cklrUjGSAGCaFK34rsFYyPuQk.svg)](https://asciinema.org/a/cklrUjGSAGCaFK34rsFYyPuQk)  

 #### centOS下安装tmux 

 ```yum install tmux```   
 查看路径：  
 ```whereis tmux```  
 tmux: /usr/bin/tmux /usr/share/man/man1/tmux. 1.gz    
 ```rpm -qal |grep tmux```  

 [![asciicast](https://asciinema.org/a/VJN1AQ5QnGB6liygtit00v4FM.svg)](https://asciinema.org/a/VJN1AQ5QnGB6liygtit00v4FM)

 #### CentOS下安装查看并卸载tshark  

 在centOS中```yum install tshark``` 发现  
 No package tshark available.  
 于是 ```yum whatprovides * tshark *```    
 发现wireshark包里包含了tshark    
 ```yum -y install wireshark```    
 ![0](/chap0x02/image/wireshark.png)    
 验证是否有tshark： ```tshark -v```    
 查看路径：```rpm -qal |grep tshark```    
 卸载tshark：```yum -y remove wireshark```    
 验证结果：```tshark -v```    

 [![asciicast](https://asciinema.org/a/wpoKX7KYNm1OfYkdKnzVs2S3B.svg)](https://asciinema.org/a/wpoKX7KYNm1OfYkdKnzVs2S3B)  

 |  环境  | ubuntu  | CentOS  |
 |  ----   | ----  | ----  |
 | 安装软件  | apt install | yum install |
 | 查看路径  | apt-cache show | rpm -qal &#124;grep  |
 | 卸载软件 | apt-get purge | yum remove |


 ## 【文件管理】

 ### 任务

 复制以下 shell 代码到终端运行，在目标 Linux 发行版系统中构造测试数据集，然后回答以下问题：  
 找到 /tmp 目录及其所有子目录下，文件名包含 666 的所有文件  
 找到 /tmp 目录及其所有子目录下，文件内容包含 666 的所有文件  
 ```cd /tmp && for i in $(seq 0 1024);do dir="test-$RANDOM";mkdir "$dir";echo "$RANDOM" > "$dir/$dir-$RANDOM";done```    

 #### ubuntu 环境
 
 1.找到 /tmp 目录及其所有子目录下，文件名包含 666 的所有文件  
 ```sudo find . -type f -name '*666*'```  

 [![asciicast](https://asciinema.org/a/woUMKyRtgmk9av0BvqhcQLv9D.svg)](https://asciinema.org/a/woUMKyRtgmk9av0BvqhcQLv9D)  
 
 2.找到 /tmp 目录及其所有子目录下，文件内容包含 666 的所有文件  
 未录屏情况下，查找文件     
 ```sudo find . -type f | xargs grep "666"```  
 查找成功   
 ![1](/chap0x02/image/未录屏查找文件.png)  
 asciinema rec 之后，再次输入相同命令，查找结果出现乱码   
 asciinema会输出.cast文件，用`--exclude`排除文件类型后缀为.cast的文件     
 ```sudo find .-type f | xargs grep "666" --exclude=*.cast```  

 [![asciicast](https://asciinema.org/a/GvSYfitApVyEqD81NmcGTEoJr.svg)](https://asciinema.org/a/GvSYfitApVyEqD81NmcGTEoJr)  

 ### CentOS 环境

 [![asciicast](https://asciinema.org/a/1nSobAEETUpj3AAAtMwXutCbc.svg)](https://asciinema.org/a/1nSobAEETUpj3AAAtMwXutCbc)  

 |  环境  | ubuntu  | CentOS  |
 |  ----   | ----  | ----  |
 | 查找文件名  |  find . -type f -name '*  *'| find / -name '*  *'  |
 | 查找文件内容  | find . -type f &#124; xargs grep "" |  find . &#124; xargs grep -ri "" |

 ## 文件压缩与解压缩
 
 先将本地文件传输到虚拟机    
 `scp C:\Users\24652\Desktop\test.zip cuc@192.168.56.101:~/`  
 ![2](/chap0x02/image/将文件传输到虚拟机.png)

 ### ubuntu

 [![asciicast](https://asciinema.org/a/yBHD7vPjibcdAiihn0WLB3ymG.svg)](https://asciinema.org/a/yBHD7vPjibcdAiihn0WLB3ymG)  

 [![asciicast](https://asciinema.org/a/HvT87YSFlxfUrfiCsS3JNKkT2.svg)](https://asciinema.org/a/HvT87YSFlxfUrfiCsS3JNKkT2)  

 ### CentOS

 [![asciicast](https://asciinema.org/a/IIfkx5M2FDplU4zrC2N5UmY4M.svg)](https://asciinema.org/a/IIfkx5M2FDplU4zrC2N5UmY4M)  

 命令使用方法相同   
 
 |   | 压缩  | 解压  |
 |  ----   | ----  | ----  |
 | zip  | zip -r test.zip . -i /home/cuc/test.txt | unzip test.zip |
 | gzip  | gzip test.txt | gzip -d test.gz  |
 | bzip2 | bzip2 -k test.txt | bzip2 -d test.txt.bz2 |
 | tar | tar cf | tar xf |  

 ## 跟练子进程管理实验  

 [![asciicast](https://asciinema.org/a/N0Km0tRdIZqRIm7c5Rp2ELmkF.svg)](https://asciinema.org/a/N0Km0tRdIZqRIm7c5Rp2ELmkF)  
  
 ## 硬件信息获取

 ### 目标系统的 CPU、内存大小、硬盘数量与硬盘容量

 #### ubuntu

 [![asciicast](https://asciinema.org/a/xVy8Ly3DFpfXniQIAvrM1tHRx.svg)](https://asciinema.org/a/xVy8Ly3DFpfXniQIAvrM1tHRx)  

 #### CentOS

 [![asciicast](https://asciinema.org/a/r0wZmjrc0wdsNpCFzzT1c1qtj.svg)](https://asciinema.org/a/r0wZmjrc0wdsNpCFzzT1c1qtj)  

 |  环境  | ubuntu  | CentOS  |
 |  ----   | ----  | ----  |
 | CPU  | cat /proc/cpuinfo | cat /proc/cpuinfo |
 | 内存  | cat /proc/meminfo 或free -m | cat /proc/meminfo或free -m  |
 | 硬盘 | lsblk | lsblk |  

 ## 参考：

 CentOS没有 tshark解决：  
 https://www.cnblogs.com/alog9/p/11805716.html  
 asciinema录屏查找文件内容出现乱码解决：  
 http://courses.cuc.edu.cn/course/82669/forum#/topics/224452?show_sidebar=false&scrollTo=topic-224452&pageIndex=2&pageCount=3&topicIds=229102,228487,228229,228070,227158,225778,225676,224452,224041,223642&predicate=lastUpdatedDate&reverse  
 第二章课件：  
 https://c4pr1c3.github.io/LinuxSysAdmin/chap0x02.md.html#/title-slide  
 ubuntu和centos对比：  
 https://cmdref.net/os/linux/note/rhel-vs-ubuntu  
